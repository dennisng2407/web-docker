version: '3'

services:

  web1:
    build:
      context: ./Web
      dockerfile: ./Web/Dockerfile
    container_name: efcc-abc
#    ports:
#      - 20001:80
    logging:
      driver: "json-file"
      options:
        max-size: "50m"
    environment:
      APACHE_LOG_DIR: /var/log/apache2
    command: /bin/bash -c "mkdir -p /var/log/apache2 && \
                            chown www-data:www-data /var/log/apache2 && \
                            ln -sf /dev/stdout /var/log/apache2/access.log && \
                            ln -sf /dev/stderr /var/log/apache2/error.log && \
                            apache2-foreground"
    networks:
      - web
      - internal
    volumes:
      - "/var/www/vhosts/xxxxxxxx/html:/var/www/html"
    restart: always






networks:
  web:
    external: true
  internal:
    external: true
